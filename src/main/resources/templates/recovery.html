<!DOCTYPE HTML>
<html xmlns:th="https://www.thymeleaf.org">
<head>
    <title>Getting Started: Handling Form Submission</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <style>
        body{
            display: -ms-flexbox;
            display: -webkit-box;
            display: flex;
            -ms-flex-align: center;
            -ms-flex-pack: center;
            -webkit-box-align: center;
            align-items: center;
            -webkit-box-pack: center;
            justify-content: center;
            background-color: #f5f5f5;
        }
    </style>
</head>
<body>


<form th:action="@{/auth/recovery}" method="post" class="form mt-5">
    <input type="hidden" name="token" th:value="${recovery_token}" />
    <div class="card mt-5">
        <div class="card-header">
            Movie Rental
        </div>
        <div class="card-body">
            <div class="form-group mb-2">
                <label for="password" >New password</label>
                <input name="password" type="password" class="form-control" id="password" placeholder="password" oninput="verifyPassword()">
            </div>
            <div class="form-group mb-2">
                <label for="confirmPassword">Confirm password</label>
                <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" placeholder="confirm password" oninput="verifyPassword()">
            </div>

            <button id="btnReset" type="submit" class="btn btn-primary mb-2 center text-center" disabled>Reset password</button>
        </div>
    </div>

</form>

<script>
    // Compare 2 passwords if equals
    function verifyPassword() {
        let inputP = document.getElementById('password');
        let inputCP = document.getElementById('confirmPassword');
        let btnReset = document.getElementById('btnReset');
        if (inputCP.value !== '' && inputCP.value === inputP.value){
            btnReset.removeAttribute('disabled');
        }else{
            btnReset.setAttribute('disabled', '');
        }
    }
</script>
</body>
</html>
